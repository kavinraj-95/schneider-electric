{
  "name": "ai-unit-test-generator",
  "displayName": "AI Unit Test Generator",
  "description": "AI-powered unit test generation using OpenAI GPT-4o or Ollama with automatic test scenario generation and pytest code creation",
  "version": "0.0.1",
  "publisher": "schneider-electric",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Testing"
  ],
  "activationEvents": [],
  "main": "./out/extension.js",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "aiUnitTesting",
          "title": "AI Unit Testing",
          "icon": "media/icon.svg"
        }
      ]
    },
    "views": {
      "aiUnitTesting": [
        {
          "id": "aiUnitTesting.files",
          "name": "Source Files",
          "type": "tree"
        },
        {
          "id": "aiUnitTesting.functions",
          "name": "Functions",
          "type": "tree"
        },
        {
          "id": "aiUnitTesting.sidebar",
          "name": "Generator",
          "type": "webview"
        }
      ]
    },
    "commands": [
      {
        "command": "aiUnitTesting.extractFunctions",
        "title": "Extract Functions",
        "icon": "$(symbol-function)"
      },
      {
        "command": "aiUnitTesting.generateTests",
        "title": "Generate Tests",
        "icon": "$(beaker)"
      },
      {
        "command": "aiUnitTesting.clearSelection",
        "title": "Clear Selection",
        "icon": "$(clear-all)"
      },
      {
        "command": "aiUnitTesting.refreshFiles",
        "title": "Refresh Files",
        "icon": "$(refresh)"
      },
      {
        "command": "aiUnitTesting.toggleFileSelection",
        "title": "Toggle File Selection"
      },
      {
        "command": "aiUnitTesting.toggleFunctionSelection",
        "title": "Toggle Function Selection"
      },
      {
        "command": "aiUnitTesting.runCoverage",
        "title": "Run Code Coverage",
        "icon": "$(pulse)"
      },
      {
        "command": "aiUnitTesting.showCoverage",
        "title": "Show Coverage Report",
        "icon": "$(graph)"
      },
      {
        "command": "aiUnitTesting.showSetupWizard",
        "title": "Setup Wizard",
        "icon": "$(settings-gear)"
      },
      {
        "command": "aiUnitTesting.showHelp",
        "title": "Show Help",
        "icon": "$(question)"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "aiUnitTesting.refreshFiles",
          "when": "view == aiUnitTesting.files",
          "group": "navigation"
        },
        {
          "command": "aiUnitTesting.extractFunctions",
          "when": "view == aiUnitTesting.files",
          "group": "navigation"
        },
        {
          "command": "aiUnitTesting.clearSelection",
          "when": "view == aiUnitTesting.functions",
          "group": "navigation"
        },
        {
          "command": "aiUnitTesting.runCoverage",
          "when": "view == aiUnitTesting.sidebar",
          "group": "navigation"
        }
      ]
    },
    "configuration": {
      "title": "AI Unit Testing",
      "properties": {
        "aiUnitTesting.llmProvider": {
          "type": "string",
          "enum": ["openai", "ollama"],
          "default": "openai",
          "description": "LLM provider to use (OpenAI recommended)"
        },
        "aiUnitTesting.openaiApiKey": {
          "type": "string",
          "default": "",
          "description": "OpenAI API key (recommended: use OPENAI_API_KEY environment variable)"
        },
        "aiUnitTesting.openaiModel": {
          "type": "string",
          "enum": ["gpt-4o", "gpt-4-turbo", "gpt-3.5-turbo"],
          "default": "gpt-4o",
          "description": "OpenAI model to use"
        },
        "aiUnitTesting.openaiOrganization": {
          "type": "string",
          "default": "",
          "description": "OpenAI organization ID (optional)"
        },
        "aiUnitTesting.ollamaEndpoint": {
          "type": "string",
          "default": "http://localhost:11434",
          "description": "Ollama server URL (only used if llmProvider is 'ollama')"
        },
        "aiUnitTesting.ollamaModel": {
          "type": "string",
          "default": "llama3.2",
          "description": "Ollama model name (only used if llmProvider is 'ollama')"
        },
        "aiUnitTesting.testOutputDir": {
          "type": "string",
          "default": "tests",
          "description": "Output directory for generated tests"
        },
        "aiUnitTesting.pythonPath": {
          "type": "string",
          "default": "python3",
          "description": "Python interpreter path"
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "pretest": "npm run compile",
    "test": "jest",
    "test:coverage": "jest --coverage",
    "coverage": "npm run test:coverage; npm run coverage:python",
    "coverage:python": "cd python && uv run pytest --cov=. --cov-report=json --cov-report=term",
    "lint": "eslint src --ext ts"
  },
  "devDependencies": {
    "@types/jest": "^29.5.0",
    "@types/node": "^20.0.0",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint": "^8.0.0",
    "jest": "^29.7.0",
    "ts-jest": "^29.1.0",
    "typescript": "^5.3.0"
  },
  "jest": {
    "preset": "ts-jest",
    "testEnvironment": "node",
    "roots": [
      "<rootDir>/src"
    ],
    "testMatch": [
      "**/__tests__/**/*.test.ts"
    ],
    "collectCoverageFrom": [
      "src/**/*.ts",
      "!src/**/*.d.ts",
      "!src/**/__tests__/**"
    ],
    "coverageDirectory": "coverage",
    "coverageReporters": [
      "json",
      "lcov",
      "text",
      "html"
    ],
    "coverageThreshold": {
      "global": {
        "branches": 50,
        "functions": 50,
        "lines": 50,
        "statements": 50
      }
    }
  }
}
